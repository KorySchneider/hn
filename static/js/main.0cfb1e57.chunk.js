(window.webpackJsonphn=window.webpackJsonphn||[]).push([[0],{203:function(e,t,n){e.exports=n(416)},208:function(e,t,n){},233:function(e,t){},247:function(e,t){},249:function(e,t){},416:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),i=n.n(c),o=(n(208),n(10)),u=n.n(o),s=n(19),l=n(20),p="UPDATE_ID_CACHE",m="UPDATE_SECTION",f="UPDATE_VISIBLE_STORIES",d="UPDATE_CURRENT_PAGE",b="UPDATE_COMMENTS_OPEN",O="UPDATE_COMMENTS",g="UPDATE_COMMENTS_PARENT";function h(e){return{type:p,ids:e}}function E(e){return{type:f,stories:e}}function v(e){return{type:d,page:e}}function y(e){return{type:b,open:e}}var w=n(21),j=n.n(w),x=n(39);var k=Object(x.b)({idCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.ids;default:return e}},section:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.section;default:return e}},visibleStories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.stories;default:return e}},currentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.page;default:return e}},commentsOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.open;default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.comments;default:return e}},commentsParent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.parent;default:return e}}}),P="https://hacker-news.firebaseio.com/v0",S=10,C="hnViewed",D=Object(x.c)(k,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());function _(){return(_=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P,"/item/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){return _.apply(this,arguments)},T=n(82),I=n(418),A=n(433),U={updateSection:function(e){return{type:m,section:e}},updateIdCache:h,updateCurrentPage:v,updateVisibleStories:E},J={margin:"2em auto",padding:"0.5em"};var V=Object(l.b)((function(e){return{section:e.section,idCache:e.idCache}}),U)((function(e){var t=e.section,n=e.updateSection,c=(e.idCache,e.updateIdCache),i=e.updateCurrentPage,o=e.updateVisibleStories;function l(e){e.stopPropagation();var r=e.currentTarget.id;r!==t&&(o([]),c([]),n(r),i(1))}return Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(P+"/".concat(t,"stories.json"));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,c(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c]),a.a.createElement(I.a,{style:J,elevation:2,align:"center"},a.a.createElement(A.a,{disabled:"top"===t,id:"top",onClick:function(e){return l(e)}},"Top"),a.a.createElement(A.a,{disabled:"new"===t,id:"new",onClick:function(e){return l(e)}},"New"),a.a.createElement(A.a,{disabled:"best"===t,id:"best",onClick:function(e){return l(e)}},"Best"),a.a.createElement(A.a,{disabled:"ask"===t,id:"ask",onClick:function(e){return l(e)}},"Ask"),a.a.createElement(A.a,{disabled:"show"===t,id:"show",onClick:function(e){return l(e)}},"Show"),a.a.createElement(A.a,{disabled:"job"===t,id:"job",onClick:function(e){return l(e)}},"Jobs"))})),M=n(40),R=n(26),W=n(30),B=n.n(W),L=n(434);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={marginLeft:"20px",padding:"5px"};function H(e){var t=e.text,n=e.styles;return a.a.createElement(L.a,{variant:"overline",style:z({},G,{},n)},t)}var Y=n(442),$=n(438),q=n(435),F=n(436),K=n(437);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee={updateCommentsOpen:y,updateComments:function(e){return{type:O,comments:e}},updateCommentsParent:function(e){return{type:g,parent:e}}};var te=Object(l.b)((function(e){return{commentsOpen:e.commentsOpen}}),ee)((function(e){var t=e.data,n=e.timeout,c=(e.commentsOpen,e.updateCommentsOpen),i=e.updateComments,o=e.updateCommentsParent,u=Object(r.useState)(!1),s=Object(R.a)(u,2),l=s[0],p=s[1],m=Object(r.useState)(!1),f=Object(R.a)(m,2),d=f[0],b=f[1];Object(r.useEffect)((function(){for(var e=JSON.parse(localStorage.getItem(C)),n=0;n<e.length;n++)e[n].id===t.id&&b(!0)}),[t.id]);var O=function(e){e.stopPropagation(),function(){b(!0);for(var e=JSON.parse(localStorage.getItem(C)),n=!1,r=0;r<e.length;r++)e[r].id===t.id&&(n=!0);n||(e.push({id:t.id,time:j()().unix()}),localStorage.setItem(C,JSON.stringify(e)))}(),t.url&&window.open(t.url),t.text&&p((function(e){return!e}))};return a.a.createElement(Y.a,{direction:"right",in:""!==t.title,mountOnEnter:!0,unmountOnExit:!0,key:t.id,style:{transitionDelay:"".concat(n,"ms")}},a.a.createElement(q.a,{onClick:function(e){return O(e)},style:{margin:"2em auto",cursor:"pointer"}},a.a.createElement(F.a,null,a.a.createElement(L.a,{variant:"h6"},B()(t.title)),a.a.createElement(L.a,{variant:"caption"},t.url&&t.url.split("/")[2].replace(/^www\./,"")),a.a.createElement(L.a,null,l&&B()(t.text),!l&&t.text&&B()(t.text.substring(0,70)+"..."))),a.a.createElement(K.a,null,a.a.createElement($.a,{align:"right"},a.a.createElement(H,{text:j.a.unix(t.time).fromNow()}),d&&a.a.createElement(H,{text:t.score+" points"}),d&&a.a.createElement(A.a,{onClick:function(e){return function(e){e.stopPropagation(),c(!0),o(t),i(t.kids)}(e)},style:Z({fontWeight:400},G),size:"small"},t.kids&&t.kids.length+" replies"||"0 replies")))))})),ne=n(439);var re=function(){return a.a.createElement($.a,{align:"center"},a.a.createElement(ne.a,{style:{margin:"2em"}}))};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function e(t){var n=t.data,c=t.depth,i=Object(r.useState)([]),o=Object(R.a)(i,2),l=o[0],p=o[1],m=Object(r.useState)(!1),f=Object(R.a)(m,2),d=f[0],b=f[1],O=function(){var e=Object(s.a)(u.a.mark((function e(){var t,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),t=[],r=0;case 3:if(!(r<n.kids.length)){e.next=11;break}return e.next=6,N(n.kids[r]);case 6:a=e.sent,t.push(a);case 8:r++,e.next=3;break;case 11:t=t.filter((function(e){return null!==e&&(!e.dead&&!e.deleted)})),p(t),b(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("span",null,a.a.createElement(Y.a,{direction:"up",in:n.id>=0,mountOnEnter:!0,unmountOnExit:!0},a.a.createElement(q.a,{raised:!0,style:{margin:"1em",padding:"5px",marginLeft:"calc(1em + ".concat(c,"em)")}},a.a.createElement(F.a,null,n.text&&n.text.split("<p>").map((function(e,t){return a.a.createElement(L.a,{gutterBottom:!0,key:e+t},B()(e))}))),a.a.createElement(K.a,null,a.a.createElement($.a,{align:"right"},a.a.createElement(H,{text:a.a.createElement("span",null,"\u2014 ",n.by)}),a.a.createElement(H,{text:j.a.unix(n.time).fromNow()}),a.a.createElement(A.a,{size:"small",style:ce({fontWeight:400},G),onClick:O,disabled:!n.kids||n.kids&&0===n.kids.length},n.kids&&n.kids.length+" replies"||"0 replies"))))),d&&a.a.createElement(re,null),l.map((function(t,n){return a.a.createElement(e,{data:t,key:t.by+t.id,timeout:50*n,depth:c+1})})))},oe=n(441),ue=n(440),se=n(197),le=n.n(se),pe={updateCommentsOpen:y};var me=Object(l.b)((function(e){return{commentsOpen:e.commentsOpen,comments:e.comments,commentsParent:e.commentsParent}}),pe)((function(e){var t=e.commentsOpen,n=e.comments,c=e.commentsParent,i=e.updateCommentsOpen,o=Object(r.useState)([]),l=Object(R.a)(o,2),p=l[0],m=l[1],f=Object(r.useState)(1),d=Object(R.a)(f,2),b=d[0],O=d[1],g=10,h=Object(T.a)((function(){p.length<=b*g&&O((function(e){return++e}))}));Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!(0===p.length||p.length<=(b-1)*g&&n.length>=b*g)){e.next=16;break}r=[],a=n.slice(b*g-g,b*g),c=0;case 6:if(!(c<a.length)){e.next=14;break}return e.next=9,N(a[c]);case 9:i=e.sent,r.push(i);case 11:c++,e.next=6;break;case 14:(r=r.filter((function(e){if(null===e)return!1;if(e.dead||e.deleted)return!1;for(var t=0;t<p.length;t++)if(e.id===p[t].id)return!1;return!0}))).length>0&&m(p.concat(r));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,b,t,p]);var E=function(){i(!1),m([]),O(1)};return null===c?null:a.a.createElement(oe.a,{open:t,onClose:E,style:{overflowY:"scroll"},ref:h},a.a.createElement($.a,{maxWidth:"md",style:{outline:0,marginTop:"1em",padding:"5px"}},a.a.createElement(Y.a,{direction:"up",mountOnEnter:!0,unmountOnExit:!0,in:t},a.a.createElement(q.a,{raised:!0},a.a.createElement(F.a,{style:{padding:"1em"}},a.a.createElement(L.a,{variant:"h5"},c.title),c.url&&a.a.createElement(L.a,{variant:"caption"},c.url.split("/")[2].replace(/^www\./,"")),c.text&&c.text.split("<p>").map((function(e){return a.a.createElement(L.a,{key:e},B()(e))}))),a.a.createElement(K.a,null,a.a.createElement($.a,{align:"right"},a.a.createElement(H,{text:a.a.createElement("span",null,"\u2014 ",c.by)}),a.a.createElement(H,{text:j.a.unix(c.time).fromNow()}))))),a.a.createElement(ue.a,{onClick:E,color:"primary",style:{position:"fixed",bottom:"2em",right:"2em",zIndex:1}},a.a.createElement(le.a,null)),p.map((function(e,t){return a.a.createElement(ie,{data:e,key:e.id,timeout:0,depth:0})})),a.a.createElement(re,null)))})),fe={updateIdCache:h,updateVisibleStories:E,updateCurrentPage:v};var de=Object(l.b)((function(e){return{visibleStories:e.visibleStories,idCache:e.idCache,page:e.currentPage}}),fe)((function(e){var t=e.visibleStories,n=e.updateVisibleStories,c=e.idCache,i=(e.updateIdCache,e.page),o=e.updateCurrentPage;return Object(T.a)((function(){t.length===i*S&&o(i+1)}),500,200),Object(r.useEffect)((function(){Storage&&null===localStorage.getItem(C)&&localStorage.setItem(C,JSON.stringify([]));var e=localStorage.getItem(C);if(e){var t=JSON.parse(e);t=t.filter((function(e){return j.a.unix(e.time).isAfter(j()().subtract(5,"days"))})),localStorage.setItem(C,JSON.stringify(t))}}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var r,a,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>0&&t.length<i*S)){e.next=13;break}r=[],a=c.slice(i*S-S,i*S),o=0;case 4:if(!(o<a.length)){e.next=12;break}return e.next=7,N(a[o]);case 7:s=e.sent,r.push(s);case 9:o++,e.next=4;break;case 12:n(t.concat(r));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,c,t,n]),a.a.createElement($.a,{maxWidth:"md"},a.a.createElement(V,null),t.map((function(e,t){return a.a.createElement(te,{data:e,key:e.title,timeout:50*t})})),a.a.createElement(re,null),a.a.createElement(me,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(l.a,{store:D},a.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[203,1,2]]]);
//# sourceMappingURL=main.0cfb1e57.chunk.js.map